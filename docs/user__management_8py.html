<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IntellectEnglish: apps/admin/user_management.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">IntellectEnglish<span id="projectnumber">&#160;1.0 beta 3 build 455(rev.6)</span>
   </div>
   <div id="projectbrief">The English Reading Platform is a comprehensive web application designed to help users improve their English language skills</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9654b8d08f4bba4e84b362c5fd320bee.html">apps</a></li><li class="navelem"><a class="el" href="dir_24f0f44aab8332a5fbd447f653b3ca8a.html">admin</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">user_management.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Blueprint for user readers' management.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a45300edc50018792eb9c056fa5434b04"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__management_8py.html#a45300edc50018792eb9c056fa5434b04">user_management.admin_required</a> (f)</td></tr>
<tr class="memdesc:a45300edc50018792eb9c056fa5434b04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decorator to enforce admin access for a view function.  <br /></td></tr>
<tr class="separator:a45300edc50018792eb9c056fa5434b04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac12d4c3f93cf1f0f04162a834284dd8f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__management_8py.html#ac12d4c3f93cf1f0f04162a834284dd8f">user_management.load_user</a> (user_id)</td></tr>
<tr class="memdesc:ac12d4c3f93cf1f0f04162a834284dd8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">User loader function for login manager.  <br /></td></tr>
<tr class="separator:ac12d4c3f93cf1f0f04162a834284dd8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92aadb10ccb2f565a5cfbcad7253413d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__management_8py.html#a92aadb10ccb2f565a5cfbcad7253413d">user_management.dashboard</a> ()</td></tr>
<tr class="memdesc:a92aadb10ccb2f565a5cfbcad7253413d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Route to the admin dashboard to view their profile.  <br /></td></tr>
<tr class="separator:a92aadb10ccb2f565a5cfbcad7253413d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a454b830be31b478fd6ec80462ffed89c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__management_8py.html#a454b830be31b478fd6ec80462ffed89c">user_management.invite_admin</a> ()</td></tr>
<tr class="memdesc:a454b830be31b478fd6ec80462ffed89c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Route to invite a reader to become an administrator.  <br /></td></tr>
<tr class="separator:a454b830be31b478fd6ec80462ffed89c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3af2a68fb4df1db2f226b4398d5eba87"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__management_8py.html#a3af2a68fb4df1db2f226b4398d5eba87">user_management.confirm</a> (token)</td></tr>
<tr class="memdesc:a3af2a68fb4df1db2f226b4398d5eba87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Route for confirming administrator privileges from the received email.  <br /></td></tr>
<tr class="separator:a3af2a68fb4df1db2f226b4398d5eba87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b2e464a4540032c25b47e0abb721c9a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__management_8py.html#a9b2e464a4540032c25b47e0abb721c9a">user_management.show_all</a> ()</td></tr>
<tr class="memdesc:a9b2e464a4540032c25b47e0abb721c9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Route to display information about all users.  <br /></td></tr>
<tr class="separator:a9b2e464a4540032c25b47e0abb721c9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3002269bf8f103ad364dfebaa510b44c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__management_8py.html#a3002269bf8f103ad364dfebaa510b44c">user_management.delete_user</a> ()</td></tr>
<tr class="memdesc:a3002269bf8f103ad364dfebaa510b44c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Route to delete a user's account.  <br /></td></tr>
<tr class="separator:a3002269bf8f103ad364dfebaa510b44c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b04e8927979b84ad717185e085d903a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__management_8py.html#a2b04e8927979b84ad717185e085d903a">user_management.revoke_admin_roles</a> ()</td></tr>
<tr class="memdesc:a2b04e8927979b84ad717185e085d903a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Route to revoke administrator roles from another administrator.  <br /></td></tr>
<tr class="separator:a2b04e8927979b84ad717185e085d903a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4008ba8f4637925769a5e68cc04718de"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__management_8py.html#a4008ba8f4637925769a5e68cc04718de">user_management.logout</a> ()</td></tr>
<tr class="memdesc:a4008ba8f4637925769a5e68cc04718de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Route for administrator logout.  <br /></td></tr>
<tr class="separator:a4008ba8f4637925769a5e68cc04718de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f3a75c305ac84be0318cf14f55c4484"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__management_8py.html#a8f3a75c305ac84be0318cf14f55c4484">user_management.create_formation</a> ()</td></tr>
<tr class="memdesc:a8f3a75c305ac84be0318cf14f55c4484"><td class="mdescLeft">&#160;</td><td class="mdescRight">Route for creating a new formation.  <br /></td></tr>
<tr class="separator:a8f3a75c305ac84be0318cf14f55c4484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85e8ae74767b6a2d91e27771caff37fa"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__management_8py.html#a85e8ae74767b6a2d91e27771caff37fa">user_management.suggest_formation_for_user</a> ()</td></tr>
<tr class="memdesc:a85e8ae74767b6a2d91e27771caff37fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Route for suggesting books for a user based on their preferences.  <br /></td></tr>
<tr class="separator:a85e8ae74767b6a2d91e27771caff37fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ef5f0a5d9fe28e113a0d848c549ec83"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__management_8py.html#a9ef5f0a5d9fe28e113a0d848c549ec83">user_management.delete_book</a> ()</td></tr>
<tr class="memdesc:a9ef5f0a5d9fe28e113a0d848c549ec83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Route for deleting a book from the database.  <br /></td></tr>
<tr class="separator:a9ef5f0a5d9fe28e113a0d848c549ec83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff98e45dd2e3d3df43b33ed506a8ccd6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__management_8py.html#aff98e45dd2e3d3df43b33ed506a8ccd6">user_management.create_book</a> ()</td></tr>
<tr class="memdesc:aff98e45dd2e3d3df43b33ed506a8ccd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Route for creating a new book in the database.  <br /></td></tr>
<tr class="separator:aff98e45dd2e3d3df43b33ed506a8ccd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae5c027d57c76f8e13827636ff97b7b80"><td class="memItemLeft" align="right" valign="top">Blueprint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__management_8py.html#ae5c027d57c76f8e13827636ff97b7b80">user_management.admin</a> = Blueprint('admin',__name__,url_prefix='/admin')</td></tr>
<tr class="memdesc:ae5c027d57c76f8e13827636ff97b7b80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creation of the blueprint for user management by administrators.  <br /></td></tr>
<tr class="separator:ae5c027d57c76f8e13827636ff97b7b80"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Blueprint for user readers' management. </p>
<p>Contains routes and functions related to reader management. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a45300edc50018792eb9c056fa5434b04" name="a45300edc50018792eb9c056fa5434b04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45300edc50018792eb9c056fa5434b04">&#9670;&#160;</a></span>admin_required()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def user_management.admin_required </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decorator to enforce admin access for a view function. </p>
<p>This decorator checks if the current user is an admin before allowing access to the decorated view function. If the current user is not an admin, the function returns a 404 error using the 'abort' function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>The view function to be decorated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: The decorated function that enforces admin access. </dd></dl>

</div>
</div>
<a id="a3af2a68fb4df1db2f226b4398d5eba87" name="a3af2a68fb4df1db2f226b4398d5eba87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3af2a68fb4df1db2f226b4398d5eba87">&#9670;&#160;</a></span>confirm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def user_management.confirm </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>token</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Route for confirming administrator privileges from the received email. </p>
<p>This route is used for confirming administrator privileges based on the confirmation token received in the email sent to the user. If the link is valid and not expired, the 'is_admin' attribute of the user is set to 1 (True) to grant administrator privileges.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">token</td><td>Token extracted from the confirmation email sent to the user. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: A JSON object indicating whether the confirmation was successful or not. </dd></dl>

</div>
</div>
<a id="aff98e45dd2e3d3df43b33ed506a8ccd6" name="aff98e45dd2e3d3df43b33ed506a8ccd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff98e45dd2e3d3df43b33ed506a8ccd6">&#9670;&#160;</a></span>create_book()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def user_management.create_book </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Route for creating a new book in the database. </p>
<p>This route is used by administrators to create a new book in the database with the provided information. The function accepts a POST request with JSON data containing the book's title, author, release date, page number, and category. A new instance of the Book model is created with the provided data and added to the database. If the book creation is successful, a JSON object with a success message is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">title</td><td>Title of the new book. </td></tr>
    <tr><td class="paramname">author</td><td>Author of the new book. </td></tr>
    <tr><td class="paramname">release_date</td><td>Release date of the new book in the format 'YYYY-MM-DD'. </td></tr>
    <tr><td class="paramname">page_number</td><td>Number of pages in the new book. </td></tr>
    <tr><td class="paramname">category</td><td>Category of the new book.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: A JSON object indicating whether the book creation was successful or not. </dd></dl>

</div>
</div>
<a id="a8f3a75c305ac84be0318cf14f55c4484" name="a8f3a75c305ac84be0318cf14f55c4484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f3a75c305ac84be0318cf14f55c4484">&#9670;&#160;</a></span>create_formation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def user_management.create_formation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Route for creating a new formation. </p>
<p>This route is used by administrators to create a new formation based on the data provided in the request. The function accepts a POST request with JSON data containing the title, author, place, and date of the formation. The formation is then added to the database.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">title</td><td>Title of the book associated with the formation. </td></tr>
    <tr><td class="paramname">author</td><td>Author of the book associated with the formation. </td></tr>
    <tr><td class="paramname">place</td><td>Location of the formation, which can be 'online' or 'classroom'. </td></tr>
    <tr><td class="paramname">date_str</td><td>Date of the formation in the format 'YYYY-MM-DD'.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: A JSON object indicating whether the formation creation was successful or not. </dd></dl>

</div>
</div>
<a id="a92aadb10ccb2f565a5cfbcad7253413d" name="a92aadb10ccb2f565a5cfbcad7253413d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92aadb10ccb2f565a5cfbcad7253413d">&#9670;&#160;</a></span>dashboard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def user_management.dashboard </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Route to the admin dashboard to view their profile. </p>
<p>This route is used by administrators to access their dashboard and view their profile details. The response is a JSON object containing the administrator's username and email.</p>
<dl class="section return"><dt>Returns</dt><dd>: A JSON object containing the administrator's username and email. </dd></dl>

</div>
</div>
<a id="a9ef5f0a5d9fe28e113a0d848c549ec83" name="a9ef5f0a5d9fe28e113a0d848c549ec83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ef5f0a5d9fe28e113a0d848c549ec83">&#9670;&#160;</a></span>delete_book()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def user_management.delete_book </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Route for deleting a book from the database. </p>
<p>This route is used by administrators to delete a book from the database based on the title and author provided. The function accepts a POST request with JSON data containing the title and author of the book to be deleted. The function retrieves the book's instance from the database and deletes it. If the book with the specified title and author is found and successfully deleted, a JSON object with a success message is returned. If no book with the specified title and author is found, a JSON object with a message indicating so is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">title</td><td>Title of the book to be deleted. </td></tr>
    <tr><td class="paramname">author</td><td>Author of the book to be deleted.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: A JSON object indicating whether the book deletion was successful or not. </dd></dl>

</div>
</div>
<a id="a3002269bf8f103ad364dfebaa510b44c" name="a3002269bf8f103ad364dfebaa510b44c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3002269bf8f103ad364dfebaa510b44c">&#9670;&#160;</a></span>delete_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def user_management.delete_user </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Route to delete a user's account. </p>
<p>This route is used by administrators to delete a user's account based on the email provided. The function accepts a POST request with JSON data containing the user's email to be deleted. If the user with the specified email exists, their account will be deleted from the database.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">email</td><td>The email of the user whose account needs to be deleted. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: A JSON object indicating whether the account deletion was successful or not. </dd></dl>

</div>
</div>
<a id="a454b830be31b478fd6ec80462ffed89c" name="a454b830be31b478fd6ec80462ffed89c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a454b830be31b478fd6ec80462ffed89c">&#9670;&#160;</a></span>invite_admin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def user_management.invite_admin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Route to invite a reader to become an administrator. </p>
<p>This route is used by administrators to invite a reader to become an administrator. The route accepts a POST request with JSON data containing the reader's email and username. The function generates a new confirmation token for the reader, sends an email invitation, and returns a JSON object containing a message indicating the success of the invitation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">email</td><td>Email of the reader for sending the confirmation link. </td></tr>
    <tr><td class="paramname">username</td><td>Username of the reader being invited. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: A JSON object containing a message notifying if the invitation was successful or not. </dd></dl>

</div>
</div>
<a id="ac12d4c3f93cf1f0f04162a834284dd8f" name="ac12d4c3f93cf1f0f04162a834284dd8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac12d4c3f93cf1f0f04162a834284dd8f">&#9670;&#160;</a></span>load_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def user_management.load_user </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>user_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>User loader function for login manager. </p>
<p>This function is used by the login manager to load users from the SQL database. It takes a unique user ID as input and returns the corresponding user object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user_id</td><td>The unique identifier of the user. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: The user object with the specified ID. </dd></dl>

</div>
</div>
<a id="a4008ba8f4637925769a5e68cc04718de" name="a4008ba8f4637925769a5e68cc04718de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4008ba8f4637925769a5e68cc04718de">&#9670;&#160;</a></span>logout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def user_management.logout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Route for administrator logout. </p>
<p>This route is used by administrators to log out from the system. After successful logout, the function returns a JSON object indicating that the logout was successful.</p>
<dl class="section return"><dt>Returns</dt><dd>: A JSON object notifying if the logout was successful. </dd></dl>

</div>
</div>
<a id="a2b04e8927979b84ad717185e085d903a" name="a2b04e8927979b84ad717185e085d903a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b04e8927979b84ad717185e085d903a">&#9670;&#160;</a></span>revoke_admin_roles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def user_management.revoke_admin_roles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Route to revoke administrator roles from another administrator. </p>
<p>This route is used by administrators to revoke administrator roles from another administrator based on the email provided. The function accepts a POST request with JSON data containing the email of the other administrator whose roles need to be revoked. If the user with the specified email exists and is an administrator, their 'is_admin' attribute will be set to False, removing their administrator rights.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">email</td><td>The email of the other administrator whose roles need to be revoked. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: A JSON object indicating whether the operation was successful or not. </dd></dl>

</div>
</div>
<a id="a9b2e464a4540032c25b47e0abb721c9a" name="a9b2e464a4540032c25b47e0abb721c9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b2e464a4540032c25b47e0abb721c9a">&#9670;&#160;</a></span>show_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def user_management.show_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Route to display information about all users. </p>
<p>This route is used by administrators to retrieve information about all users in the system. The response is a JSON object containing various user details such as email, username, confirmation status, and admin status.</p>
<dl class="section return"><dt>Returns</dt><dd>: A JSON object containing information about all users. </dd></dl>

</div>
</div>
<a id="a85e8ae74767b6a2d91e27771caff37fa" name="a85e8ae74767b6a2d91e27771caff37fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85e8ae74767b6a2d91e27771caff37fa">&#9670;&#160;</a></span>suggest_formation_for_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def user_management.suggest_formation_for_user </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Route for suggesting books for a user based on their preferences. </p>
<p>This route is used by administrators to suggest books to a user based on their preferences and previous follows. The function accepts a POST request with JSON data containing the user's email. The function calculates the user's most followed book category and suggests books from that category. If there are suggestions available, a JSON object containing the book details is returned as a response. If no suggestions are found, a JSON object with a message indicating so is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">email</td><td>Email of the user for whom the book suggestions are to be made.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: A JSON object containing book suggestions or a message if no suggestions are found. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ae5c027d57c76f8e13827636ff97b7b80" name="ae5c027d57c76f8e13827636ff97b7b80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5c027d57c76f8e13827636ff97b7b80">&#9670;&#160;</a></span>admin</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Blueprint user_management.admin = Blueprint('admin',__name__,url_prefix='/admin')</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creation of the blueprint for user management by administrators. </p>
<p>This blueprint defines routes and views for managing users by administrators. The blueprint is registered with the URL prefix '/admin'. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
